import{_ as Q,r as b,o as z,s as W,x as K,v as g,c as a,b as i,d as e,g as j,t as l,C as X,l as f,D as v,G as w,f as n,u as h,H as p,w as _,I as Y,T as H,F as ee,e as te,J as oe,K as L}from"./index-BlUnDCUG.js";const re={class:"bg-gray-100 min-h-screen"},se={class:"container mx-auto px-4 py-16"},le={class:"mb-16"},ne={class:"grid grid-cols-2 md:grid-cols-5 gap-6 mt-12 mb-24"},ae={class:"bg-white p-6 rounded-xl shadow-lg flex items-center space-x-4 transform hover:scale-105 transition-transform duration-300 hover:bg-blue-200"},ie={class:"text-3xl font-bold text-gray-800"},de={class:"bg-white p-6 rounded-xl shadow-lg flex items-center space-x-4 transform hover:scale-105 transition-transform duration-300 hover:bg-pink-200"},ue={class:"text-3xl font-bold text-gray-800"},ce={class:"bg-white p-6 rounded-xl shadow-lg flex items-center space-x-4 transform hover:scale-105 transition-transform duration-300 hover:bg-sky-200"},be={class:"text-3xl font-bold text-gray-800"},ge={class:"bg-white p-6 rounded-xl shadow-lg flex items-center space-x-4 transform hover:scale-105 transition-transform duration-300 hover:bg-amber-200"},pe={class:"text-3xl font-bold text-gray-800"},me={class:"bg-white p-6 rounded-xl shadow-lg flex items-center space-x-4 transform hover:scale-105 transition-transform duration-300 hover:bg-indigo-200"},ve={class:"text-3xl font-bold text-gray-800"},fe={class:"mb-16"},xe={class:"bg-white p-4 rounded-xl shadow-lg mb-8 flex flex-col md:flex-row items-center gap-4 flex-wrap"},we={class:"relative flex-grow w-full md:w-auto"},he={class:"mb-16"},ye=["onClick"],ke={class:"absolute top-2 right-2 bg-white p-1 rounded-full shadow-md"},Ce={class:"text-xl"},Me={class:"relative mb-5"},Ae=["src"],Te={class:"text-2xl font-extrabold text-blue-800 mb-1"},je={class:"text-sm font-semibold text-gray-700 bg-blue-100 px-3 py-1 rounded-full mb-2"},_e={class:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full"},$e={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 overflow-y-auto p-4"},ze={class:"text-3xl font-bold mb-6 text-gray-800"},He={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Le={class:"mb-4 md:col-span-2"},Ee={class:"mb-4"},Ve={class:"mb-4"},Be={class:"mb-4"},Se={class:"mb-4"},Fe={class:"mb-4 md:col-span-2"},Je={class:"mb-4 md:col-span-2"},Ue=["src"],Pe={class:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto"},qe={key:0,type:"submit",class:"bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-300 shadow-md w-full sm:w-auto hidden sm:block cursor-pointer"},De={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 overflow-y-auto p-4"},Ge={class:"bg-white p-8 rounded-2xl shadow-2xl w-full max-w-sm modal-container mx-4 max-h-full overflow-y-auto"},Ne={class:"flex justify-end gap-4"},Re={__name:"Licencies",setup(Ie){const M=b(window.innerWidth<640),A=()=>{M.value=window.innerWidth<640};z(()=>{window.addEventListener("resize",A)}),W(()=>{window.removeEventListener("resize",A)});const x=b(""),d=b("Tous"),u=b("Tous"),y=b(!1),c=b(!1),k=b(!1),s=b({}),m=b([]),E=()=>{s.value={rank:0,name:"",category:"",licence:"",gender:"Homme",age_category:"Adulte",photo:null},y.value=!0},V=r=>{const t=r.target.files[0];if(t){const o=new FileReader;o.onload=$=>{s.value.photo=$.target.result},o.readAsDataURL(t)}else s.value.photo=null},B=r=>{p.isAdmin&&(s.value={...r},c.value=!0)},C=()=>{y.value=!1,c.value=!1,k.value=!1,T()},T=async()=>{try{const r=new URLSearchParams;x.value&&r.append("searchQuery",x.value),d.value!=="Tous"&&r.append("filterGenre",d.value),u.value!=="Tous"&&r.append("filterAge",u.value);const t=await fetch(`http://localhost:3000/api/licencies?${r.toString()}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const o=await t.json();m.value=o}catch(r){console.error("Erreur lors de la récupération des licenciés:",r)}},S=async()=>{try{const r=localStorage.getItem("token"),t=await fetch("http://localhost:3000/api/licencies",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(s.value)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);C()}catch(r){console.error("Erreur lors de l'ajout du licencié:",r)}},F=async()=>{try{const r=await fetch(`http://localhost:3000/api/licencies/${s.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.token}`},body:JSON.stringify(s.value)});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);C()}catch(r){console.error("Erreur lors de la mise à jour du licencié:",r)}},J=()=>{k.value=!0},U=async()=>{try{const r=await fetch(`http://localhost:3000/api/licencies/${s.value.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${p.token}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);C()}catch(r){console.error("Erreur lors de la suppression du licencié:",r)}};z(()=>{window.addEventListener("resize",A),T()}),K([x,d,u],T);const P=g(()=>m.value.length),q=g(()=>m.value.filter(r=>r.gender==="Femme").length),D=g(()=>m.value.filter(r=>r.gender==="Homme").length),G=g(()=>m.value.filter(r=>r.age_category==="Junior").length),N=g(()=>m.value.filter(r=>r.age_category==="Adulte").length),R=g(()=>d.value!=="Tous"?"border-blue-500":"border-gray-200"),I=g(()=>u.value!=="Tous"?"border-blue-500":"border-gray-200"),Z=g(()=>m.value),O=r=>r>=10?"bg-green-500":r>=8?"bg-yellow-500":r>=6?"bg-orange-500":"bg-red-500";return(r,t)=>(i(),a("div",re,[t[39]||(t[39]=e("section",{class:"bg-gradient-to-r from-blue-500 to-teal-400 text-white py-20"},[e("div",{class:"container mx-auto px-4 text-center"},[e("h1",{class:"text-5xl font-extrabold mb-4 text-yellow-400 text-shadow-sm"},"Licenciés du Club"),e("p",{class:"text-xl"},"Liste des licenciés de la saison en cours")])],-1)),e("div",se,[e("section",le,[t[25]||(t[25]=e("h2",{class:"text-4xl font-bold text-center text-blue-600 mb-20 border-b-2 border-blue-600 pb-2 text-shadow-sm"}," Statistiques des Licenciés",-1)),e("div",ne,[e("div",ae,[t[16]||(t[16]=e("div",{class:"bg-blue-100 p-3 rounded-full"},[e("svg",{class:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",null,[e("p",ie,l(P.value),1),t[15]||(t[15]=e("p",{class:"text-gray-500"},"Total licenciés",-1))])]),e("div",de,[t[18]||(t[18]=e("div",{class:"bg-pink-100 p-3 rounded-full"},[e("svg",{class:"w-8 h-8 text-pink-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",null,[e("p",ue,l(q.value),1),t[17]||(t[17]=e("p",{class:"text-gray-500"},"Femmes",-1))])]),e("div",ce,[t[20]||(t[20]=e("div",{class:"bg-sky-100 p-3 rounded-full"},[e("svg",{class:"w-8 h-8 text-sky-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A5.975 5.975 0 0112 13a5.975 5.975 0 016-5.197M15 21a6 6 0 00-9-5.197"})])],-1)),e("div",null,[e("p",be,l(D.value),1),t[19]||(t[19]=e("p",{class:"text-gray-500"},"Hommes",-1))])]),e("div",ge,[t[22]||(t[22]=X('<div class="bg-amber-100 p-3 rounded-full" data-v-0c8015b0><svg class="w-8 h-8 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-0c8015b0><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.25278C12 6.25278 10.8954 5 9.5 5C8.10457 5 7 6.10457 7 7.5C7 8.89543 8.10457 10 9.5 10C10.8954 10 12 8.89543 12 7.5V6.25278Z" data-v-0c8015b0></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.25278C12 6.25278 13.1046 5 14.5 5C15.8954 5 17 6.10457 17 7.5C17 8.89543 15.8954 10 14.5 10C13.1046 10 12 8.89543 12 7.5V6.25278Z" data-v-0c8015b0></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10V13" data-v-0c8015b0></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 13C12 13 10.8954 14.5 9.5 14.5C8.10457 14.5 7 15.6046 7 17C7 18.3954 8.10457 19.5 9.5 19.5C10.8954 19.5 12 18.3954 12 17V13Z" data-v-0c8015b0></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 13C12 13 13.1046 14.5 14.5 14.5C15.8954 14.5 17 15.6046 17 17C17 18.3954 15.8954 19.5 14.5 19.5C13.1046 19.5 12 18.3954 12 17V13Z" data-v-0c8015b0></path></svg></div>',1)),e("div",null,[e("p",pe,l(G.value),1),t[21]||(t[21]=e("p",{class:"text-gray-500"},"Juniors",-1))])]),e("div",me,[t[24]||(t[24]=e("div",{class:"bg-indigo-100 p-3 rounded-full"},[e("svg",{class:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",null,[e("p",ve,l(N.value),1),t[23]||(t[23]=e("p",{class:"text-gray-500"},"Adultes",-1))])])])]),e("section",fe,[t[27]||(t[27]=e("h2",{class:"text-4xl font-bold text-center text-blue-600 mb-12 border-b-2 border-blue-600 pb-2 text-shadow-sm"}," Rechercher et Gérer les Licenciés",-1)),e("div",xe,[e("div",we,[v(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>x.value=o),placeholder:"Rechercher...",class:"w-full p-3 pl-10 border-2 border-gray-200 rounded-xl text-black focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-300"},null,512),[[w,x.value]]),t[26]||(t[26]=e("svg",{class:"w-5 h-5 text-gray-400 absolute top-1/2 left-3 transform -translate-y-1/2 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),e("div",{class:n(["flex items-center gap-2 bg-gray-100 p-1 rounded-xl border-2 transition-colors duration-300",R.value])},[e("button",{onClick:t[1]||(t[1]=o=>d.value="Tous"),class:n([d.value==="Tous"?"bg-white text-blue-600 shadow-lg":"text-gray-500 hover:text-blue-500","px-4 py-2 rounded-lg font-semibold transition-all duration-300 flex items-center gap-2 cursor-pointer"])},"Tous",2),e("button",{onClick:t[2]||(t[2]=o=>d.value="Femme"),class:n([d.value==="Femme"?"bg-white text-blue-600 shadow-lg":"text-gray-500 hover:text-blue-500","px-4 py-2 rounded-lg font-semibold transition-all duration-300 flex items-center gap-2 cursor-pointer"])},"Femmes",2),e("button",{onClick:t[3]||(t[3]=o=>d.value="Homme"),class:n([d.value==="Homme"?"bg-white text-blue-600 shadow-lg":"text-gray-500 hover:text-blue-500","px-4 py-2 rounded-lg font-semibold transition-all duration-300 flex items-center gap-2 cursor-pointer"])},"Hommes",2)],2),e("div",{class:n(["flex items-center gap-2 bg-gray-100 p-1 rounded-xl border-2 transition-colors duration-300",I.value])},[e("button",{onClick:t[4]||(t[4]=o=>u.value="Tous"),class:n([u.value==="Tous"?"bg-white text-blue-600 shadow-lg":"text-gray-500 hover:text-blue-500","px-4 py-2 rounded-lg font-semibold transition-all duration-300 flex items-center gap-2 cursor-pointer"])},"Tous âges",2),e("button",{onClick:t[5]||(t[5]=o=>u.value="Junior"),class:n([u.value==="Junior"?"bg-white text-blue-600 shadow-lg":"text-gray-500 hover:text-blue-500","px-4 py-2 rounded-lg font-semibold transition-all duration-300 flex items-center gap-2 cursor-pointer"])},"Juniors",2),e("button",{onClick:t[6]||(t[6]=o=>u.value="Adulte"),class:n([u.value==="Adulte"?"bg-white text-blue-600 shadow-lg":"text-gray-500 hover:text-blue-500","px-4 py-2 rounded-lg font-semibold transition-all duration-300 flex items-center gap-2 cursor-pointer"])},"Adultes",2)],2),h(p).isAdmin?(i(),a("button",{key:0,onClick:E,class:"shrink-0 w-full lg:w-auto bg-blue-600 text-white py-3 px-5 rounded-xl font-semibold hover:bg-blue-700 transition-colors duration-300 shadow-md flex items-center justify-center gap-2 cursor-pointer"}," Ajouter ")):f("",!0)])]),e("section",he,[j(Y,{tag:"div",name:"list",class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8"},{default:_(()=>[(i(!0),a(ee,null,te(Z.value,o=>(i(),a("div",{key:o.id||o.licence,onClick:$=>h(p).isAdmin&&!M.value?B(o):null,class:n(["relative bg-gradient-to-br from-white to-blue-50 rounded-2xl shadow-lg p-6 text-center flex flex-col items-center border border-gray-200 hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 transform scale-105 overflow-hidden",{"cursor-pointer":h(p).isAdmin&&!M.value}])},[e("div",ke,[e("span",Ce,l(o.gender==="Homme"?"♂️":"♀️"),1)]),e("div",Me,[o.photo?(i(),a("img",{key:0,src:o.photo,class:"w-28 h-28 rounded-full object-cover ring-4 ring-blue-300 ring-offset-2",loading:"lazy",width:"112",height:"112"},null,8,Ae)):(i(),a("div",{key:1,class:n(["w-28 h-28 rounded-full flex items-center justify-center text-white font-bold text-3xl ring-4 ring-blue-300 ring-offset-2",O(o.rank)])},l(o.rank),3))]),e("h3",Te,l(o.name),1),e("p",je,l(o.category),1),e("p",_e,l(o.licence),1)],10,ye))),128))]),_:1})])]),j(H,{name:"modal"},{default:_(()=>[y.value||c.value?(i(),a("div",$e,[e("div",{class:n(["bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md modal-container mx-4 max-h-full overflow-y-auto",y.value||c.value?"scale-100 opacity-100":"scale-95 opacity-0"])},[e("h2",ze,l(c.value?"Modifier le licencié":"Ajouter un licencié"),1),e("form",{onSubmit:t[13]||(t[13]=oe(o=>c.value?F():S(),["prevent"]))},[e("div",He,[e("div",Le,[t[28]||(t[28]=e("label",{for:"name",class:"block text-gray-700 font-semibold mb-2"},"Nom",-1)),v(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=o=>s.value.name=o),id:"name",class:"w-full p-3 border-2 border-gray-200 rounded-lg text-black focus:border-blue-500 transition-colors duration-300",required:""},null,512),[[w,s.value.name]])]),e("div",Ee,[t[29]||(t[29]=e("label",{for:"category",class:"block text-gray-700 font-semibold mb-2"},"Catégorie",-1)),v(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=o=>s.value.category=o),id:"category",class:"w-full p-3 border-2 border-gray-200 rounded-lg text-black focus:border-blue-500 transition-colors duration-300",required:""},null,512),[[w,s.value.category]])]),e("div",Ve,[t[30]||(t[30]=e("label",{for:"rank",class:"block text-gray-700 font-semibold mb-2"},"Classement",-1)),v(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=o=>s.value.rank=o),id:"rank",class:"w-full p-3 border-2 border-gray-200 rounded-lg text-black focus:border-blue-500 transition-colors duration-300",required:""},null,512),[[w,s.value.rank]])]),e("div",Be,[t[31]||(t[31]=e("label",{for:"licence",class:"block text-gray-700 font-semibold mb-2"},"Licence",-1)),v(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=o=>s.value.licence=o),id:"licence",class:"w-full p-3 border-2 border-gray-200 rounded-lg text-black focus:border-blue-500 transition-colors duration-300",required:""},null,512),[[w,s.value.licence]])]),e("div",Se,[t[33]||(t[33]=e("label",{for:"gender",class:"block text-gray-700 font-semibold mb-2"},"Genre",-1)),v(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.value.gender=o),id:"gender",class:"w-full p-3 border-2 border-gray-200 rounded-lg text-black focus:border-blue-500 transition-colors duration-300",required:""},[...t[32]||(t[32]=[e("option",{value:"Homme"},"Homme",-1),e("option",{value:"Femme"},"Femme",-1)])],512),[[L,s.value.gender]])]),e("div",Fe,[t[35]||(t[35]=e("label",{for:"age_category",class:"block text-gray-700 font-semibold mb-2"},"Catégorie d'âge",-1)),v(e("select",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.value.age_category=o),id:"age_category",class:"w-full p-3 border-2 border-gray-200 rounded-lg text-black focus:border-blue-500 transition-colors duration-300",required:""},[...t[34]||(t[34]=[e("option",{value:"Adulte"},"Adulte",-1),e("option",{value:"Junior"},"Junior",-1)])],512),[[L,s.value.age_category]])]),e("div",Je,[t[36]||(t[36]=e("label",{for:"photo",class:"block text-gray-700 font-semibold mb-2"},"Photo",-1)),e("input",{type:"file",onChange:V,id:"photo",class:"w-full p-3 border-2 border-gray-200 rounded-lg text-black focus:border-blue-500 transition-colors duration-300"},null,32),s.value.photo?(i(),a("img",{key:0,src:s.value.photo,class:"mt-4 w-32 h-32 object-cover rounded-lg",width:"128",height:"128"},null,8,Ue)):f("",!0)])]),e("div",{class:n(["flex flex-col sm:flex-row mt-6 gap-4",c.value?"justify-between":"justify-end"])},[c.value&&h(p).isAdmin?(i(),a("button",{key:0,type:"button",onClick:J,class:"bg-red-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-red-700 transition-colors duration-300 shadow-md w-full sm:w-auto hidden sm:block cursor-pointer"},"Supprimer")):f("",!0),e("div",Pe,[e("button",{type:"button",onClick:C,class:"bg-gray-200 text-gray-800 py-3 px-6 rounded-lg font-semibold hover:bg-gray-300 transition-colors duration-300 w-full sm:w-auto cursor-pointer"},"Annuler"),h(p).isAdmin?(i(),a("button",qe,l(c.value?"Modifier":"Ajouter"),1)):f("",!0)])],2)],32)],2)])):f("",!0)]),_:1}),j(H,{name:"modal"},{default:_(()=>[k.value?(i(),a("div",De,[e("div",Ge,[t[37]||(t[37]=e("h2",{class:"text-2xl font-bold mb-4 text-gray-800"},"Confirmer la suppression",-1)),t[38]||(t[38]=e("p",{class:"text-gray-600 mb-6"},"Êtes-vous sûr de vouloir supprimer ce licencié ? Cette action est irréversible. ",-1)),e("div",Ne,[e("button",{onClick:t[14]||(t[14]=o=>k.value=!1),class:"bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-semibold hover:bg-gray-300"},"Annuler"),e("button",{onClick:U,class:"bg-red-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-red-700"},"Supprimer")])])])):f("",!0)]),_:1})]))}},Oe=Q(Re,[["__scopeId","data-v-0c8015b0"]]);export{Oe as default};
